<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Tool</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="css/video-generator.css">
    <style id="auth-hide">body{display:none !important;}</style>
    <script>
        // Simple Client-Side Protection
        (function() {
            // ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô)
            const ADMIN_PASSWORD = "admin";
            
            function checkAuth() {
                if (sessionStorage.getItem('admin_access') === 'true') {
                    return true;
                }
                const input = prompt("üîí Restricted Access\n‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô Admin:");
                if (input === ADMIN_PASSWORD) {
                    sessionStorage.setItem('admin_access', 'true');
                    return true;
                }
                return false;
            }

            if (!checkAuth()) {
                window.location.href = "index.html";
            } else {
                window.addEventListener('DOMContentLoaded', () => {
                    const style = document.getElementById('auth-hide');
                    if(style) style.remove();
                });
            }
        })();
    </script>
</head>
<body>
    <div class="header-bar"></div>
    <div class="container">
        <div style="text-align: center; display: block;">
            <h1>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</h1>
        </div>
        <p class="subtitle">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå videos.json ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö GitHub Pages</p>
        
        <div class="warning-box">
                <div class="warning-box-content">
                <div>
                    <div class="warning-box-title">
                        <span class="material-symbols-outlined" style="vertical-align: middle;">warning</span> ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç
                    </div>
                    <div class="warning-box-text">
                        ‡∏´‡∏•‡∏±‡∏á‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå <code>videos.json</code> 
                        ‡πÉ‡∏´‡πâ‡∏ß‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå <code>data/</code> ‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ
                    </div>
                </div>
            </div>
        </div>
        
        <div class="stats">
            <div class="stat-box">
                <div class="stat-number" id="totalVideos">0</div>
                <div class="stat-label">‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="animationCount">0</div>
                <div class="stat-label">‡πÅ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="gameCount">0</div>
                <div class="stat-label">‡πÄ‡∏Å‡∏°</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="webCount">0</div>
                <div class="stat-label">‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="videoCount">0</div>
                <div class="stat-label">‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="graphicCount">0</div>
                <div class="stat-label">‡∏Å‡∏£‡∏≤‡∏ü‡∏¥‡∏Å</div>
            </div>
        </div>
        
        <div class="grid">
            <!-- Left Column: Add Video Form -->
            <div class="section">
                <h2>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÉ‡∏´‡∏°‡πà</h2>
                
                <form id="videoForm" onsubmit="addVideo(event)">
                    <div class="form-group">
                        <label for="videoUrl">Video URL (Google Drive ‡∏´‡∏£‡∏∑‡∏≠ R2/Direct Link) *</label>
                        <input type="url" id="videoUrl" required 
                               placeholder="https://drive.google.com/... ‡∏´‡∏£‡∏∑‡∏≠ https://.../video.mp4">
                    </div>
                    
                    <div class="form-group">
                        <label for="thumbnailFile">‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏†‡∏≤‡∏û‡∏õ‡∏Å (Thumbnail) - ‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö</label>
                        <input type="file" id="thumbnailFile" accept="image/jpeg,image/png,image/webp"
                               onchange="handleThumbnailUpload(event)">
                        <small style="color: #999; display: block; margin-top: 5px; line-height: 1.6;">
                            üí° <strong>‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏†‡∏≤‡∏û‡∏õ‡∏Å:</strong><br>
                            1. ‡∏Ñ‡∏•‡∏¥‡∏Å "Choose File" ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå<br>
                            2. ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå .jpg, .png, .webp<br>
                            3. ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏†‡∏≤‡∏û‡πÑ‡∏ß‡πâ‡πÉ‡∏ô <code>images/cover/</code><br>
                            <br>
                            ‚ö†Ô∏è <em>‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏†‡∏≤‡∏û‡∏õ‡∏Å ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏ó‡∏ô</em><br>
                            ‚úÖ <em>‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ‡∏Ç‡∏ô‡∏≤‡∏î 1280x720px (16:9) ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 2MB</em>
                        </small>
                        <div id="thumbnailPreview" style="margin-top: 10px;"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="category">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà *</label>
                        <select id="category" required>
                            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</option>
                            <option value="animation">‡πÅ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô</option>
                            <option value="game">‡πÄ‡∏Å‡∏°</option>
                            <option value="web">‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå</option>
                            <option value="video">‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠</option>
                            <option value="graphic">‡∏Å‡∏£‡∏≤‡∏ü‡∏¥‡∏Å</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="title">‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ *</label>
                        <input type="text" id="title" required 
                               placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏•‡∏á‡∏≤‡∏ô">
                    </div>
                    
                    <div class="form-group">
                        <label for="description">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î *</label>
                        <textarea id="description" required 
                                  placeholder="‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ú‡∏•‡∏á‡∏≤‡∏ô"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="studentName">‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤ *</label>
                        <input type="text" id="studentName" required 
                               placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡∏•‡∏á‡∏≤‡∏ô">
                    </div>
                    
                    <button type="submit" class="success" id="submitBtn">
                        <span class="material-symbols-outlined">add</span> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠
                    </button>
                    <button type="button" onclick="clearForm()">
                        <span class="material-symbols-outlined">restart_alt</span> ‡∏•‡πâ‡∏≤‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°
                    </button>
                </form>
            </div>
            
            <!-- Right Column: Video List & Actions -->
            <div class="section">
                <h2>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠</h2>
                
                <div class="toolbar">
                    <button class="success" onclick="updateVideosJSON()">
                        <span class="material-symbols-outlined">refresh</span> Update
                    </button>
                    <button onclick="downloadJSON()">
                        <span class="material-symbols-outlined">download</span> ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î JSON
                    </button>
                    <button onclick="importJSON()">
                        <span class="material-symbols-outlined">upload_file</span> ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ JSON
                    </button>
                    <button onclick="previewJSON()">
                        <span class="material-symbols-outlined">visibility</span> ‡∏î‡∏π‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á JSON
                    </button>
                    <button class="danger" onclick="clearAll()">
                        <span class="material-symbols-outlined">delete</span> ‡∏•‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                    </button>
                </div>
                
                <div class="video-list" id="videoList">
                    <p class="empty-state">
                        ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢‡∏°‡∏∑‡∏≠
                    </p>
                </div>
            </div>
        </div>
        
        <!-- JSON Preview Modal (Hidden by default) -->
        <div id="jsonModal" class="modal-overlay">
            <div class="modal-content">
                <h2 class="modal-title">‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á JSON</h2>
                <div class="json-preview" id="jsonPreview"></div>
                <button onclick="closeModal()" style="margin-top: 20px;">‡∏õ‡∏¥‡∏î</button>
                <button class="success" onclick="copyJSON()" style="margin-top: 20px;">Copy JSON</button>
            </div>
        </div>
    </div>

    <script src="js/video-generator.js"></script>
</body>
</html>
